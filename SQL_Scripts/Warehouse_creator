DROP TABLE IF EXISTS term, chromosomes, positions, snp, refalt, variant;

CREATE TABLE term(

	nome TEXT NOT NULL,
	id INT PRIMARY KEY NOT NULL,
	term_hierarchy TEXT NOT NULL

);

CREATE TABLE chromosomes(

	chr VARCHAR(4) PRIMARY KEY,
	group_chr VARCHAR(5)

);

CREATE TABLE positions(

	pos INT PRIMARY KEY NOT NULL,
	interval_pos INT NOT NULL

);

CREATE TABLE snp(

	snp_id INT PRIMARY KEY NOT NULL

);

CREATE TABLE refalt(

	ref CHAR(3),
	alt CHAR(3),
	couple_refalt CHAR(6),
	PRIMARY KEY(ref, alt)

);

CREATE TABLE variant(
	
	chr VARCHAR(4) REFERENCES chromosomes(chr),
	pos INT REFERENCES positions(pos),
	ref CHAR(3) ,
	alt CHAR(3) ,
	id INT REFERENCES term(id),
	snp_id INT REFERENCES snp(snp_id),
	freq NUMERIC(1,1) ,
	tot_var INT DEFAULT 1,
	FOREIGN KEY (ref,alt) REFERENCES refalt(ref,alt)

);